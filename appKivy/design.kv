#:kivy 2.1.0
#: import RiseInTransition kivy.uix.screenmanager.RiseInTransition
#: import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import MapView kivy_garden.mapview.MapView
<ElementCard@MDCard>:   #Esquema base de botones en pantalla principal
    radius: '10dp'
    spacing: '10dp'
    padding: '10dp'
    image: ''
    text: ''
    sub_text: ''
    orientation: 'vertical'
    ripple_behavior: True
    on_release:
        app.root.transition = RiseInTransition()
   
    

<CustomizeScreen@MDBoxLayout>:
    orientation: 'vertical'
    text: ''
    padding: 100

    MDLabel:
        text: root.text
        halign: 'center'
        pos_hint: {'center_x': .5}

    MDFillRoundFlatButton:
        icon: 'images/iconoBusqueda.png'
        color_icon: '#000000'
        pos_hint: {'center_x': .5}
        on_release:
            app.root.current = 'screen_principal'
            app.root.transition = SlideTransition(direction= 'left')




<ui>:

    MDScreen:
        name: 'login'
        md_bg_color: 0, 0, 0, 1
        MDBoxLayout:
            orientation: 'vertical'
            spacing:dp(12)
            padding:dp(12)
            MDBoxLayout:
                orientation: 'vertical'
                size_hint_y: 0.3
                Image:
                    source: 'logo.png'
                    pos_hint: {'center_x':0.5}
                MDLabel:
                    text: 'Iniciar Sesion'
                    halign: 'center'
                    color: 'FF5A1E'
                    font_size:dp(28)
                    bold: True
                    pos_hint: {'center_y': 0.5}
            MDBoxLayout:
                orientation: 'vertical'
                size_hint_y: 0.3
                spacing: dp(12)
                MDTextField:
                    id: user
                    hint_text: 'Nombre de usuario'
                    icon_right: 'account'
                    font_size: dp(20)
                    icon_right_color: '#FF5A1E'
                    pos_hint: {'center_x': 0.5}
                MDTextField:
                    id: password
                    password: True
                    icon_right: 'key-variant'
                    icon_right_color: '#FF5A1E'
                    hint_text: 'Contrasena'
                    font_size:dp(20)
                    pos_hint: {'center_x':0.5}

                MDLabel:
                    id: signal_login
                    text: ''
                    halign:'center'
                    color:'#FF5A1E'
                    font_size:dp(15)
            
            MDBoxLayout:
                orientation: 'vertical'
                size_hint_y: 0.4
                spacing: dp(15)
                MDFillRoundFlatButton:
                    id: bt_ingresar
                    text: 'Acceder'
                    pos_hint:{'center_x':0.5}
                    on_release: 
                        #x = app.login_data()
                        root.inicioSesion(user.text, password.text)
                MDFillRoundFlatButton:
                    md_bg_color: '#000000'
                    text_color: 255/255, 90/255, 30/255,1
                    text: 'Crear cuenta'
                    font_size: dp(20)
                    pos_hint: {'center_x':0.5}
                    on_release: root.current = 'screen_register'

###############SCREEN################
    MDScreen:
        name: 'open_screen'
        md_bg_color: 255/255, 90/255, 30/255,1
        MDBoxLayout:
            orientation: 'vertical'
            padding: dp(12)
            spacing: dp(12)
            MDFloatingActionButton:
                icon: 'images/iconoBusqueda.png'
                color_icon: '#000000'
                on_release: root.current = 'login'
    

    MDScreen:
        name: 'screen_register'
        md_bg_color: 0,0,0,1

        MDBoxLayout:
            orientation: 'vertical'
            padding: dp(12)
            spacing: dp(12)
            MDBoxLayout:
                orientation: 'horizontal'
                size_hint: 1, 0.2
                MDFloatingActionButton:
                    icon:'arrow-left'
                    color_icon: '#000000'
                    pos_hint: {'center_y':0.5}
                    on_release:
                        root.current = 'login'
                        root.clear_signal()

                MDLabel:
                    text: 'Crear cuenta'
                    halign: 'center'
                    color: '#FF5A1E'
                    font_size: dp(28)
                    bold: True
                    pos_hint: {'center_y': 0.5}
            MDBoxLayout:
                orientation: 'vertical'
                size_hint: 1, 0.7
                MDLabel:
                    text: 'Nombre de usuario'
                    halign: 'center'
                    color: '#FF5A1E'
                    font_size:dp(20)
                MDTextField:
                    id: new_user
                    hint_text: 'Usuario'
                    icon_right: 'account'
                    font_size: dp(20)
                    icon_right_color: '#FF5A1E'
                    pos_hint: {'center_x': 0.5}
                MDLabel:
                    text: 'Ingrese su contrasena'
                    halign: 'center'
                    color: '#FF5A1E'
                    font_size:dp(20)
                MDTextField:
                    id: new_password
                    password:True
                    icon_right: 'key-variant'
                    icon_right_color: '#FF5A1E'
                    hint_text: 'Contrasena'
                    font_size: dp(20)
                    pos_hint: {'center_x':0.5}
                MDLabel:
                    text: 'Nombre'
                    halign: 'center'
                    color: '#FF5A1E'
                    font_size:dp(20)
                MDTextField:
                    id: new_password_two
                    password: True
                    icon_right: 'deathly-hallows'
                    icon_right_color: '#FF5A1E'
                    hint_text: 'Contrasena'
                    font_size:dp(20)
                    pos_hint: {'center_x':0.5}

                MDLabel:
                    text: 'Apellido'
                    halign: 'center'
                    color: '#FF5A1E'
                    font_size:dp(20)
                MDTextField:
                    id: new_user
                    hint_text: 'Apellido'
                    icon_right: 'deathly-hallows'
                    font_size: dp(20)
                    icon_right_color: '#FF5A1E'
                    pos_hint: {'center_x': 0.5}
                
                MDLabel:
                    text: 'Correo electronico'
                    halign: 'center'
                    color: '#FF5A1E'
                    font_size:dp(20)
                MDTextField:
                    id: new_user
                    hint_text: 'Correo electronico'
                    icon_right: 'email'
                    font_size: dp(20)
                    icon_right_color: '#FF5A1E'
                    pos_hint: {'center_x': 0.5}

                MDLabel:
                    text: 'Edad'
                    halign: 'center'
                    color: '#FF5A1E'
                    font_size:dp(20)
                MDTextField:
                    id: new_user
                    hint_text: 'Edad'
                    icon_right: 'death-star'
                    font_size: dp(20)
                    icon_right_color: '#FF5A1E'
                    pos_hint: {'center_x': 0.5}

            MDBoxLayout:
                orientation: 'vertical'
                size_hint: 1, 0.3
                MDLabel:
                    id: signal_register
                    text:''
                    halign:'center'
                    color: '#FF5A1E'
                    font_size: dp(15)

                MDFillRoundFlatButton:
                    id: bt_register
                    text: 'Registrarse'
                    pos_hint: {'center_x':0.5, 'y':0.5}
                    on_release: app.register_data()                    


    MDScreen:
        name: 'screen_principal'
        md_bg_color: 0, .5, 1, 1 #color del fondo
        MDBoxLayout:
            orientation: 'vertical'
            MDBoxLayout:
                size_hint: 1, 0.2
                orientation: 'horizontal'
                padding: '10dp'
                MDCard:
                    radius:'10dp'
                    padding:'10dp'
                    line_color:1, 0, 1, 1

                    MDLabel:
                        text: "Evently"
                        halign: 'center'
                        pos_hint: {'center_y': 0.5}
                    MDSwitch:
                        pos_hint: {'center_y': 0.5}
                        on_active:
                            app.change_style(*args)

            MDGridLayout:
                cols: 3
                size_hint: 1, .8
                padding: ['10dp', '10dp', '10dp', '10dp']
                spacing: '10dp'

                ElementCard:  #Boton de Mapa
                    on_release:
                        root.generate_markers()
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Mapa'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoMapa.png'
                        MDLabel:
                            text: 'Mapa de discotecas'
                            halign: 'center'
                    
                    
                
                ElementCard:  #Boton de Busqueda
                    on_release:
                        root.current = 'BuscarDiscoteca'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Buscar discotecas'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoBusqueda.png'
                        MDLabel:
                            text: 'Filtrado de discotecas'
                            halign: 'center'

                ElementCard: #Boton de Discoteca
                    on_release:
                        root.current = 'añadirDiscoteca'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Añadir Discoteca'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoAnnadir.png'
                        MDLabel:
                            text: 'Añadir discoteca a la lista'
                            halign: 'center'
 

                ElementCard:  #Boton de buscar Perfiles
                    on_release:
                        root.current = 'usuarios'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Usuarios'
                            halign: 'center'
                        Image: 
                            source: 'images/perfiles.png'
                        MDLabel:
                            text: 'Buscar otros usuarios'
                            halign: 'center'


                ElementCard:  #Boton de Fiesta
                    on_release:
                        root.current = 'fiesta'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Añadir Fiesta'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoFiesta.png'
                        MDLabel:
                            text: 'Añadir tu propia fiesta'
                            halign: 'center'
                    

                ElementCard:  #Boton de Perfil
                    on_release:
                        root.current = 'perfil'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Perfil'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoDePerfil.png'
                        MDLabel:
                            text: 'Ver tu perfil'
                            halign: 'center'

                ElementCard:  #Boton de Reseña
                    on_release:
                        root.current = 'reseña'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Reseñas'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoResenna.png'
                        MDLabel:
                            text: 'Ver y añadir reseñas'
                            halign: 'center'


                ElementCard:  #Boton de Chats
                    on_release:
                        root.current = 'chat'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Chats'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoChat.png'
                        MDLabel:
                            text: 'Chatea con otros usuarios'
                            halign: 'center'

                ElementCard:  #Boton de ajustes
                    on_release:
                        root.current = 'ajustes'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Ajustes'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoAjustes.png'
                        MDLabel:
                            text: 'Personaliza evently'
                            halign: 'center'

    MDScreen:
        name: 'Mapa'

        MDBoxLayout:
            orientation: 'vertical'
            MapView:
                id: mapview
                lat: 40.416775
                lon: -3.703790
                text: ''
                zoom: 15

            MDFillRoundFlatButton:
                icon: 'images/iconoBusqueda.png'
                color_icon: '#000000'
                size_hint_y: 0.05
                #centrasdo
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_release:
                    root.borrarBusquedaFiltrado()
                    app.root.current = 'screen_principal'
                    app.root.transition = SlideTransition(direction= 'left')
        
        
    MDScreen:
        name: 'BuscarDiscoteca'
        MDBoxLayout:
            orientation: 'vertical'
            MDBoxLayout:
                orientation: 'vertical'
                
                MDBoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: 0.1
                    Spinner:
                        id: spinnerFiltrado
                        adaptative_width: True
                        size_hint_x: 0.25
                        max_size_hint_y: 0.1
                        text: 'Zona'
                        values: 'Zona', 'Nombre', 'Calle', 'Valoracion'
                        on_text:
                            print("The spinner {} has text {}".format(self, self.text))
                    MDTextField:
                        id: MDTextFieldFiltrado
                        hint_text: "Introducir texto"
                        mode: "fill"
                        max_size_hint_y: 0.1
                        size_hint_y: 1
                        size_hint_x: 0.55
                        fill_color: 0, 0, 0, .4

                    MDFloatingActionButton:
                        icon: 'images/iconoBusqueda.png'
                        #icon size is 24dp
                        elevation_normal: 8
                        max_size_hint_y: 0.1
                        size_hint_y: 1
                        md_bg_color: 0, .5, 1, 1
                        size_hint_x: 0.2
                        on_press: root.botonBusquedaFiltrado(MDTextFieldFiltrado.text, spinnerFiltrado.text)
                
                MDScrollView:
                    do_scroll_y: True
                    size_hint_y: 0.9
                    
                    MDList: 
                        id: MDListFiltrado
                        adaptative_height: True
                        scroll_type: 'bars'
                        bar_width: '12dp'
                            
            MDLabel:
                id: MDLabelFiltrado
                opacity: 0
                size: (0, 0)
                size_hint: None, None


            MDFillRoundFlatButton:
                icon: 'images/iconoBusqueda.png'
                color_icon: '#000000'
                size_hint_y: 0.05
                #centrasdo
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_release:
                    root.borrarBusquedaFiltrado()
                    app.root.current = 'screen_principal'
                    app.root.transition = SlideTransition(direction= 'left')
    

    MDScreen:
        name: 'añadirDiscoteca'
        
        BoxLayout:
            orientation: 'vertical'
            
            

            MDLabel:
                text: 'Añadir Discoteca'
                halign: 'center'
                size_hint_y: 0.2

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: 0.2
                MDLabel:
                    text: 'NOMBRE'
                    halign: 'left'
                    size_hint_x: 0.2
                MDTextFieldRect:
                    id: MDTextFieldNombre
                    hint_text: "Introducir el nombre de la discoteca"
                    size_hint_x: 0.8
                    height: "30dp"
                    max_text_length: 20
                    #required: True
                    max_size_hint_y:0.15
                    mode: "fill"
                    fill_color: 0, 0, 0, .4
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: 0.2
                
                MDLabel:
                    text: 'ZONA'
                    halign: 'left'
                    size_hint_x: 0.2
                MDTextFieldRect:
                    id: MDTextFieldZona
                    hint_text: "Introducir el nombre de la discoteca"
                    height: "30dp"
                    max_text_length: 10
                    size_hint_x: 0.8
                    max_size_hint_y:0.15
                    #required: True
                    mode: "fill"
                    fill_color: 0, 0, 0, .4

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: 0.2
                MDLabel:
                    text: 'CALLE'
                    halign: 'left'
                    size_hint_x: 0.2
                MDTextFieldRect:
                    id: MDTextFieldCalle
                    hint_text: "Introducir el nombre de la discoteca"
                    height: "30dp"
                    max_text_length: 30
                    size_hint_x: 0.8
                    max_size_hint_y:0.15
                    #required: True
                    mode: "fill"
                    fill_color: 0, 0, 0, .4
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: 0.2
                MDLabel:
                    text: 'NUMERO'
                    halign: 'left'
                    size_hint_x: 0.2
                MDTextFieldRect:
                    id: MDTextFieldNumero
                    hint_text: "Introducir el nombre de la discoteca"
                    height: "30dp"
                    max_text_length: 30
                    size_hint_x: 0.8
                    max_size_hint_y:0.15
                    #required: True
                    mode: "fill"
                    fill_color: 0, 0, 0, .4

            MDFillRoundFlatButton:
                icon: 'images/iconoBusqueda.png'
                color_icon: '#000000'

                pos_hint: {'center_x': .5, 'center_y': .5}
                on_release:
                    app.root.current = 'screen_principal'
                    app.root.transition = SlideTransition(direction= 'left')

    MDScreen:
        name: 'fiesta'
        CustomizeScreen:
            text: 'Pantalla cuatro'

    MDScreen:
        name: 'perfil'
        on_pre_enter: root.cargarDatos()
        MDBoxLayout:
            orientation: 'vertical'
            BoxLayout:
                orientation: 'vertical'
                GridLayout:
                    cols: 2
                    Label:
                        text: 'Nombre de usuario:'
                        font_size: 55
                        bold: True
                        halign: 'left'
                    Label:
                        id: userText
                        text: root.usernameText
                        font_size: 50
                        align: 'left'
                        bold: True
                    Label:
                        text: 'Nombre:'
                        font_size: 55
                        bold: True
                        halign: 'left'
                    Label:
                        id: nombre
                        text: root.nombre
                        font_size: 50
                        align: 'left'
                        bold: True
                    Label:
                        text: 'Apellido:'
                        font_size: 55
                        bold: True
                        halign: 'left'
                    Label:
                        id: apellido
                        text: root.apellido
                        font_size: 50
                        align: 'left'
                        bold: True
                    Label:
                        text: 'Edad:'
                        font_size: 55
                        bold: True
                        halign: 'left'
                    Label:
                        id: edad
                        text: root.edad
                        font_size: 50
                        align: 'left'
                        bold: True
                    Label:
                        text: 'Correo electrónico:'
                        font_size: 55
                        align: 'left'
                        bold: True
                    Label:
                        id: email
                        text: root.email
                        font_size: 50
                        align: 'left'
                        bold: True

            MDFillRoundFlatButton:
                icon: 'images/iconoBusqueda.png'
                color_icon: '#000000'

                pos_hint: {'center_x': .5, 'center_y': .5}
                on_release:
                    app.root.current = 'screen_principal'
                    app.root.transition = SlideTransition(direction= 'left')
    MDScreen:
        name: 'reseña'
        MDBoxLayout:
            orientation: 'vertical'
            MDBoxLayout:
                orientation: 'vertical'
                spacing: 2
        
                MDBoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: 0.1
                    Spinner:
                        id: spinnerFiltradoResena
                        adaptative_width: True
                        size_hint_x: 0.25
                        max_size_hint_y: 0.1
                        text: 'Nombre'
                        values: 'Nombre', 'Usuario', 'Valoración', 'Nota'
                        on_text:
                            print("The spinner {} has text {}".format(self, self.text))
                    MDTextField:
                        id: MDTextFieldFiltradoResena
                        hint_text: "Introducir texto"
                        mode: "fill"
                        max_size_hint_y: 0.1
                        size_hint_y: 1
                        size_hint_x: 0.55
                        fill_color: 0, 0, 0, .4

                    MDFloatingActionButton:
                        icon: 'images/iconoBusqueda.png'
                        #icon size is 24dp
                        elevation_normal: 8
                        max_size_hint_y: 0.1
                        size_hint_y: 1
                        md_bg_color: 0, .5, 1, 1
                        size_hint_x: 0.2
                        on_press: root.botonBusquedaFiltradoResenas(MDTextFieldFiltradoResena.text, spinnerFiltradoResena.text)
                
                MDScrollView:
                    do_scroll_y: True
                    size_hint_y: 0.9
                    
                    MDList: 
                        id: MDListFiltradoResena
                        adaptative_height: True
                        scroll_type: 'bars'
                        bar_width: '12dp'

                MDFillRoundFlatButton:
                    id: MDFillRoundFlatButtonAnnadirReseña
                    icon: 'images/iconoBusqueda.png'
                    color_icon: '#000000'

                    pos_hint: {'center_x': .5, 'center_y': .5}
                    on_release:
                        root.cargarDiscotecasSpinner()
                        app.root.transition = SlideTransition(direction= 'down')
                            
            MDLabel:
                id: MDLabelFiltradoRsenaUno
                opacity: 0
                size: (0, 0)
                size_hint: None, None
                bold: True
                font_size: 55
                pos_hint: {'center_x': 0.5}
            MDLabel:
                id: MDLabelFiltradoRsenaDos
                opacity: 0
                size: (0, 0)
                size_hint: None, None
                font_size: 50
                pos_hint: {'center_x': 0.5}
            MDLabel:
                id: MDLabelFiltradoRsenaTres
                opacity: 0
                size: (0, 0)
                size_hint: None, None
                bold: True
                font_size: 55
                pos_hint: {'center_x': 0.5}


            MDFillRoundFlatButton:
                icon: 'images/iconoBusqueda.png'
                color_icon: '#000000'
                size_hint_y: 0.05
                #centrasdo
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_release:
                    root.borrarBusquedaFiltradoResenas()
                    app.root.current = 'screen_principal'
                    app.root.transition = SlideTransition(direction= 'left')

    MDScreen:
        name: 'usuarios'
        MDBoxLayout:
            orientation: 'vertical'
            MDBoxLayout:
                orientation: 'vertical'
                MDBoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: 0.1
                    MDTextField:
                        id: MDTextFieldBuscadorUsuarios
                        hint_text: "Introducir texto"
                        mode: "fill"
                        max_size_hint_y: 0.1
                        size_hint_y: 1
                        size_hint_x: 0.9
                        height: self.minimum_height
                        fill_color: 0, 0, 0, .4


                    MDFloatingActionButton:
                        icon: 'images/iconoBusqueda.png'
                        #icon size is 24dp
                        elevation_normal: 8
                        max_size_hint_y: 0.1
                        size_hint_y: 1
                        md_bg_color: 0, .5, 1, 1
                        size_hint_x: 0.2
                        on_press: root.botonBusquedaUsuarios(MDTextFieldBuscadorUsuarios.text)
                
                ScrollView:
                    do_scroll_y: True
                    size_hint_y: 0.80
                    MDList:
                        id: MDListBuscadorUsuarios
                        scroll_type: 'bars'
                        height: self.minimum_height
                        bar_width: '12dp'



            MDFillRoundFlatButton:
                icon: 'images/iconoBusqueda.png'
                color_icon: '#000000'

                size_hint_y: 0.05
                pos_hint: {'center_x': .5, 'center_y': .5}
                on_release:
                    root.borrarBusquedaFiltrado()
                    app.root.current = 'screen_principal'
                    app.root.transition = SlideTransition(direction= 'left')


    MDScreen:
        name: 'chat'
        MDBoxLayout:
            orientation: 'vertical'
            MDBoxLayout:
                orientation: 'vertical'
                MDBoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: 0.1
                    MDTextField:
                        id: MDTextFieldBuscadorChat
                        hint_text: "Introducir texto"
                        mode: "fill"
                        max_size_hint_y: 0.1
                        size_hint_y: 1
                        size_hint_x: 0.9
                        height: self.minimum_height
                        fill_color: 0, 0, 0, .4


                    MDFloatingActionButton:
                        icon: 'images/iconoBusqueda.png'
                        #icon size is 24dp
                        elevation_normal: 8
                        max_size_hint_y: 0.1
                        size_hint_y: 1
                        md_bg_color: 0, .5, 1, 1
                        size_hint_x: 0.2
                        on_press: root.botonBusquedaChat(MDTextFieldBuscadorChat.text)
                
                ScrollView:
                    do_scroll_y: True
                    size_hint_y: 0.80
                    MDList:
                        id: MDListFiltradoChat
                        scroll_type: 'bars'
                        height: self.minimum_height
                        bar_width: '12dp'



            MDFillRoundFlatButton:
                icon: 'images/iconoBusqueda.png'
                color_icon: '#000000'

                size_hint_y: 0.05
                pos_hint: {'center_x': .5, 'center_y': .5}
                on_release:
                    root.borrarBusquedaFiltrado()
                    app.root.current = 'screen_principal'
                    app.root.transition = SlideTransition(direction= 'left')

    MDScreen:
        name: 'ajustes'
        CustomizeScreen:
            text: 'Pantalla nueve'

    MDScreen:
        name: 'datosUsuarioBuscado'
        MDBoxLayout:
            orientation: 'vertical'
            BoxLayout:
                orientation: 'vertical'
                GridLayout:
                    cols: 2
                    Label:
                        text: 'Nombre de usuario:'
                        font_size: 55
                        bold: True
                        halign: 'left'
                    Label:
                        id: userTextUsuarioBuscado
                        font_size: 50
                        align: 'left'
                        bold: True
                    Label:
                        text: 'Nombre:'
                        font_size: 55
                        bold: True
                        halign: 'left'
                    Label:
                        id: nombreTextUsuarioBuscado
                        font_size: 50
                        align: 'left'
                        bold: True
                    Label:
                        text: 'Apellido:'
                        font_size: 55
                        bold: True
                        halign: 'left'
                    Label:
                        id: apellidoTextUsuarioBuscado
                        font_size: 50
                        align: 'left'
                        bold: True
                    Label:
                        text: 'Edad:'
                        font_size: 55
                        bold: True
                        halign: 'left'
                    Label:
                        id: edadTextUsuarioBuscado
                        font_size: 50
                        align: 'left'
                        bold: True
                    Label:
                        text: 'Correo electrónico:'
                        font_size: 55
                        align: 'left'
                        bold: True
                    Label:
                        id: emailTextUsuarioBuscado
                        font_size: 50
                        align: 'left'
                        bold: True

            MDFillRoundFlatButton:
                icon: 'images/iconoBusqueda.png'
                color_icon: '#000000'

                pos_hint: {'center_x': .5, 'center_y': .5}
                on_release:
                    app.root.current = 'usuarios'
                    app.root.transition = SlideTransition(direction= 'left')

    MDScreen:
        name: 'chatDm'
        BoxLayout:
            orientation: 'vertical'
            MDBoxLayout:
                orientation: 'horizontal'
                size_hint_y: 0.1
                Button:
                    id: send_button
                    size_hint_x: 0.1
                    md_bg_color: 0, .5, 1, 1
                    icon: 'images/iconoBusqueda.png'
                    on_release:
                        root.current = 'chat'
                Label:
                    id: user_label
                    text:
                    size_hint_x: 0.9
                    halign: 'center'    

            ScrollView:
                id: scrollChat
                size_hint_y: 0.8
                
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: self.minimum_height

                    MDList:
                        id: other_user_list
                        halign: 'left'
                        size_hint_x: 0.5

                    MDList:
                        id: this_user_list
                        halign: 'right'
                        size_hint_x: 0.5

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: 0.1
                halign: 'end'

                TextInput:
                    id: message_input
                    size_hint_x: 0.9
                    height: self.line_height
                    multiline: False

                Button:
                    id: send_button
                    size_hint_x: 0.1
                    md_bg_color: 0, .5, 1, 1
                    icon: 'images/iconoBusqueda.png'
                    on_press: root.send_message(message_input.text,user_label.text)

    MDScreen:
        name: 'annadirReseñaScreen'
        MDBoxLayout:
            orientation: 'vertical'
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: 0.15
                Spinner:
                    id: discoteca
                    text: ''
                    size_hint_x: 0.7

                Spinner:
                    id: estrellas
                    text: 'Estrellas'
                    values: '1', '2', '3', '4', '5'
                    size_hint_x: 0.3
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: 0.65
                MDTextField:
                    id: reseñaTexto
                    hint_text: 'Introduce tu reseña'
                    multiline: True
                    size_hint_x: 0.5

            Label:
                id: error
                opacity: 0
                size: (0, 0)
                color: 1, 0, 0, 1
                size_hint: None, None

                text: ''
            MDFillRoundFlatButton:
                size_hint_y: 0.2
                text: 'Añadir reseña'
                pos_hint: {'center_x': .5, 'center_y': .5}
                on_release:
                    root.annadirReseña(discoteca.text, estrellas.text, reseñaTexto.text)
                    app.root.transition = SlideTransition(direction= 'up')
                
