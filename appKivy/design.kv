#:kivy 2.1.0
#: import RiseInTransition kivy.uix.screenmanager.RiseInTransition
#: import SlideTransition kivy.uix.screenmanager.SlideTransition

<ElementCard@MDCard>:   #Esquema base de botones en pantalla principal
    radius: '10dp'
    spacing: '10dp'
    padding: '10dp'
    image: ''
    text: ''
    sub_text: ''
    orientation: 'vertical'
    ripple_behavior: True
    on_release:
        app.root.transition = RiseInTransition()
   
    

<CustomizeScreen@MDBoxLayout>:
    orientation: 'vertical'
    text: ''
    padding: 100

    MDLabel:
        text: root.text
        halign: 'center'
        pos_hint: {'center_x': .5}

    MDFillRoundFlatButton:
        text: 'Regresar'
        pos_hint: {'center_x': .5}
        on_release:
            app.root.current = 'screen_principal'
            app.root.transition = SlideTransition(direction= 'left')




<ui>:
    MDScreen:
        name: 'screen_principal'
        md_bg_color: 0, .5, 1, 1 #color del fondo
        MDBoxLayout:
            orientation: 'vertical'
            MDBoxLayout:
                size_hint: 1, 0.2
                orientation: 'horizontal'
                padding: '10dp'
                MDCard:
                    radius:'10dp'
                    padding:'10dp'
                    line_color:1, 0, 1, 1

                    MDLabel:
                        text: "Evently"
                        halign: 'center'
                        pos_hint: {'center_y': 0.5}
                    MDSwitch:
                        pos_hint: {'center_y': 0.5}
                        on_active:
                            app.change_style(*args)

            MDGridLayout:
                cols: 3
                size_hint: 1, .8
                padding: ['10dp', '10dp', '10dp', '10dp']
                spacing: '10dp'

                ElementCard:  #Boton de Mapa
                    on_release:
                        root.current = 'mapa'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Mapa'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoMapa.png'
                        MDLabel:
                            text: 'Mapa de discotecas'
                            halign: 'center'
                    
                    
                
                ElementCard:  #Boton de Busqueda
                    on_release:
                        root.current = 'BuscarDiscoteca'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Buscar discotecas'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoBusqueda.png'
                        MDLabel:
                            text: 'Filtrado de discotecas'
                            halign: 'center'

                ElementCard: #Boton de Discoteca
                    on_release:
                        root.current = 'añadirDiscoteca'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Añadir Discoteca'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoAnnadir.png'
                        MDLabel:
                            text: 'Añadir discoteca a la lista'
                            halign: 'center'
 

                ElementCard:  #Boton de buscar Perfiles
                    on_release:
                        root.current = 'usuarios'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Usuarios'
                            halign: 'center'
                        Image: 
                            source: 'images/perfiles.png'
                        MDLabel:
                            text: 'Buscar otros usuarios'
                            halign: 'center'


                ElementCard:  #Boton de Fiesta
                    on_release:
                        root.current = 'fiesta'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Añadir Fiesta'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoFiesta.png'
                        MDLabel:
                            text: 'Añadir tu propia fiesta'
                            halign: 'center'
                    

                ElementCard:  #Boton de Perfil
                    on_release:
                        root.current = 'perfil'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Perfil'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoDePerfil.png'
                        MDLabel:
                            text: 'Ver tu perfil'
                            halign: 'center'

                ElementCard:  #Boton de Reseña
                    on_release:
                        root.current = 'reseña'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Reseñas'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoResenna.png'
                        MDLabel:
                            text: 'Ver y añadir reseñas'
                            halign: 'center'


                ElementCard:  #Boton de Chats
                    on_release:
                        root.current = 'chat'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Chats'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoChat.png'
                        MDLabel:
                            text: 'Chatea con otros usuarios'
                            halign: 'center'

                ElementCard:  #Boton de ajustes
                    on_release:
                        root.current = 'ajustes'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: 'Ajustes'
                            halign: 'center'
                        Image: 
                            source: 'images/iconoAjustes.png'
                        MDLabel:
                            text: 'Personaliza evently'
                            halign: 'center'

    MDScreen:
        name: 'mapa'
        CustomizeScreen:
            text: 'Pantalla uno'
        
    MDScreen:
        name: 'BuscarDiscoteca'
        MDBoxLayout:
            orientation: 'vertical'
            MDBoxLayout:
                orientation: 'vertical'
                Spinner:
                    id: spinnerFiltrado
                    adaptative_width: True
                    size_hint_max_y: 60
                    pos_hint: {'center_x': .5, 'center_y': .5}
                    text: 'Zona'
                    values: 'Zona', 'Nombre', 'Calle', 'Valoracion'
                    on_text:
                        print("The spinner {} has text {}".format(self, self.text))
                MDBoxLayout:
                    orientation: 'horizontal'
                    size_hint_max_y: 50
                    MDTextField:
                        id: MDTextFieldFiltrado
                        hint_text: "Introducir texto"
                        size: 200, 40
                        mode: "fill"
                        fill_color: 0, 0, 0, .4
                        pos_hint: {"center_x": .25, 'center_y': .90}

                    MDFloatingActionButton:
                        icon: 'images/iconoBusqueda.png'
                        md_bg_color: 0, .5, 1, 1
                        pos_hint: {'center_y': .90}
                        on_press: root.botonBusquedaFiltrado(MDTextFieldFiltrado.text, spinnerFiltrado.text)
                
                ScrollView:
                    do_scroll_y: True
                    MDList:
                        id: MDListFiltrado
                        adaptative_height: True
                        padding: 0, 0
                        pos_hint: {'center_x': .5, 'center_y': 1}
                        size: 200, 400
                        scroll_type: 'bars'
                        bar_width: '12dp'



            MDFillRoundFlatButton:
                text: 'Regresar'
                pos_hint: {'center_x': .5, 'center_y': .5}
                on_release:
                    root.borrarBusquedaFiltrado()
                    app.root.current = 'screen_principal'
                    app.root.transition = SlideTransition(direction= 'left')
    

    MDScreen:
        name: 'añadirDiscoteca'
        
        BoxLayout:
            orientation: 'vertical'

            MDLabel:
                text: 'Añadir Discoteca'
                halign: 'center'
            MDFillRoundFlatButton:
                text: 'Regresar'
                pos_hint: {'center_x': .5, 'center_y': .5}
                on_release:
                    app.root.current = 'screen_principal'
                    app.root.transition = SlideTransition(direction= 'left')

    MDScreen:
        name: 'fiesta'
        CustomizeScreen:
            text: 'Pantalla cuatro'

    MDScreen:
        name: 'perfil'
        CustomizeScreen:
            text: 'Pantalla cinco'

    MDScreen:
        name: 'reseña'
        CustomizeScreen:
            text: 'Pantalla seis'

    MDScreen:
        name: 'usuarios'
        CustomizeScreen:
            text: 'Pantalla siete'

    MDScreen:
        name: 'chat'
        CustomizeScreen:
            text: 'Pantalla ocho'

    MDScreen:
        name: 'ajustes'
        CustomizeScreen:
            text: 'Pantalla nueve'


